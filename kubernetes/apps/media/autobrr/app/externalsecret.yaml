---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: autobrr
  namespace: media
spec:
  target:
    name: autobrr-secret
    creationPolicy: Owner
    template:
      type: Opaque
      data:
        AUTOBRR__DATABASETYPE: postgres
        AUTOBRR__POSTGRESDATABASE: autobrr
        AUTOBRR__POSTGRESHOST: "{{ .AUTOBRR__POSTGRESHOST }}"
        AUTOBRR__POSTGRESUSER: "{{ .AUTOBRR__POSTGRESUSER }}"
        AUTOBRR__POSTGRESPASS: "{{ .AUTOBRR__POSTGRESPASS }}"
        AUTOBRR__POSTGRESPORT: "5432"
        AUTOBRR__SESSIONSECRET: "{{ .AUTOBRR__SESSIONSECRET }}"
  data:
    - secretKey: AUTOBRR__POSTGRESHOST
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 3e5c3984-f384-4e0c-83d3-b0b4013a5ead
        property: AUTOBRR__POSTGRESHOST
    - secretKey: AUTOBRR__POSTGRESUSER
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 3e5c3984-f384-4e0c-83d3-b0b4013a5ead
        property: AUTOBRR__POSTGRESUSER
    - secretKey: AUTOBRR__POSTGRESUSER
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 3e5c3984-f384-4e0c-83d3-b0b4013a5ead
        property: AUTOBRR__POSTGRESUSER
    - secretKey: AUTOBRR__POSTGRESPASS
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 3e5c3984-f384-4e0c-83d3-b0b4013a5ead
        property: AUTOBRR__POSTGRESPASS
    - secretKey: AUTOBRR__SESSIONSECRET
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 3e5c3984-f384-4e0c-83d3-b0b4013a5ead
        property: AUTOBRR__SESSIONSECRET
