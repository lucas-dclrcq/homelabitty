[agent]
interval = "10s"
round_interval = true
metric_batch_size = 1000
metric_buffer_limit = 10000
collection_jitter = "0s"
flush_interval = "10s"
flush_jitter = "0s"
precision = ""
hostname = ""
omit_hostname = false

[[outputs.influxdb_v2]]
urls = ["http://influxdb-influxdb2.infrastructure.svc.cluster.local"]
token = "${INFLUXDB_TOKEN}"
organization = "homelab"
bucket = "sensors"

## The value of this tag will be used to determine the bucket.  If this
## tag is not set the 'bucket' option is used as the default.
# bucket_tag = ""

[[inputs.mqtt_consumer]]
client_id = "telegraf_linky"
servers = ["tcp://emqx-headless.infrastructure.svc.cluster.local:1883"]
topics = ["zigbee2mqtt/ LIXEE-ZLINKY-TIC"]
username = "${MQTT_USERNAME}"
password = "${MQTT_PASSWORD}"
data_format = "json"

## Enable extracting tag values from MQTT topics
## _ denotes an ignored entry in the topic path
# [[inputs.mqtt_consumer.topic_parsing]]
#   topic = ""
#   measurement = ""
#   tags = ""
#   fields = ""
## Value supported is int, float, unit
#   [[inputs.mqtt_consumer.topic.types]]
#      key = type
#[[inputs.mqtt_consumer.json_v2]]
